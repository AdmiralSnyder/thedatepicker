var TheDatepicker;!function(e){var t;(t=e.DayOfWeek||(e.DayOfWeek={}))[t.Monday=1]="Monday",t[t.Tuesday=2]="Tuesday",t[t.Wednesday=3]="Wednesday",t[t.Thursday=4]="Thursday",t[t.Friday=5]="Friday",t[t.Saturday=6]="Saturday",t[t.Sunday=0]="Sunday"}(TheDatepicker=TheDatepicker||{}),function(e){var t;(t=e.Month||(e.Month={}))[t.January=0]="January",t[t.February=1]="February",t[t.March=2]="March",t[t.April=3]="April",t[t.May=4]="May",t[t.June=5]="June",t[t.July=6]="July",t[t.August=7]="August",t[t.September=8]="September",t[t.October=9]="October",t[t.November=10]="November",t[t.December=11]="December"}(TheDatepicker=TheDatepicker||{}),function(n){var e=(t.prototype.setDayOfWeekTranslation=function(e,t){switch(e){case n.DayOfWeek.Monday:case n.DayOfWeek.Tuesday:case n.DayOfWeek.Wednesday:case n.DayOfWeek.Thursday:case n.DayOfWeek.Friday:case n.DayOfWeek.Saturday:case n.DayOfWeek.Sunday:this.dayOfWeekTranslations[e]=t;break;default:throw new Error("Day of week was expected to be TheDatepicker.DayOfWeek constant, but "+e+" given.")}},t.prototype.setMonthTranslation=function(e,t){switch(e){case n.Month.January:case n.Month.February:case n.Month.March:case n.Month.April:case n.Month.May:case n.Month.June:case n.Month.July:case n.Month.August:case n.Month.September:case n.Month.October:case n.Month.November:case n.Month.December:this.monthTranslations[e]=t;break;default:throw new Error("Month was expected to be TheDatepicker.Month constant, but "+e+" given.")}},t.prototype.translateDayOfWeek=function(e){return this.dayOfWeekTranslations[e]},t.prototype.translateMonth=function(e){return this.monthTranslations[e]},t);function t(){this.dayOfWeekTranslations=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthTranslations=["January","February","March","April","May","June","July","August","September","October","November","December"]}n.Translator=e}(TheDatepicker=TheDatepicker||{}),function(e){var h=function(){};e.CannotParseDateException=h;var t=(n.prototype.formatDate=function(e,t){for(var n=!1,i="",r=0;r<e.length;r++){var o=e.substring(r,r+1);if(n)i+=o,n=!1;else if(o!==this.escapeChar){var a=this.getFormatter(o);i+=null===a?o:a.call(this,t)}else n=!0}return i},n.prototype.parseDate=function(e,t){if(""===t)return null;for(var n=new Date,i=!1,r=0,o=0;o<e.length;o++){var a=e.substring(o,o+1);if(i)i=!1;else{if(a===this.escapeChar){i=!0;continue}var s=this.getParser(a);if(null!==s){try{r+=s.call(this,t.substring(r),n)}catch(e){if(!(e instanceof h))throw e;if(" "!==t.substring(r,r+1))throw e;r++,o--;continue}if(isNaN(n.getTime()))throw new h;continue}}var l=t.substring(r,r+1);if(l===a)r++;else{if(" "===a)continue;if(" "!==l)throw new h;r++,o--}}return n},n.prototype.getFormatter=function(e){switch(e){case"j":return this.formatDay;case"d":return this.formatDayWithLeadingZero;case"D":return this.formatDayOfWeekTextual;case"n":return this.formatMonth;case"m":return this.formatMonthWithLeadingZero;case"F":return this.formatMonthTextual;case"Y":return this.formatYear;case"y":return this.formatYearTwoDigits;default:return null}},n.prototype.formatDay=function(e){return e.getDate().toString()},n.prototype.formatDayWithLeadingZero=function(e){var t=e.getDate().toString();return 1===t.length&&(t="0"+t),t},n.prototype.formatDayOfWeekTextual=function(e){return this.translator.translateDayOfWeek(e.getDay())},n.prototype.formatMonth=function(e){return(e.getMonth()+1).toString()},n.prototype.formatMonthWithLeadingZero=function(e){var t=(e.getMonth()+1).toString();return 1===t.length&&(t="0"+t),t},n.prototype.formatMonthTextual=function(e){return this.translator.translateMonth(e.getMonth())},n.prototype.formatYear=function(e){return e.getFullYear().toString()},n.prototype.formatYearTwoDigits=function(e){var t=e.getFullYear().toString();return t.substring(t.length-2)},n.prototype.getParser=function(e){switch(e){case"j":case"d":return this.parseDay;case"D":return this.parseDayOfWeekTextual;case"n":case"m":return this.parseMonth;case"F":return this.parseMonthTextual;case"Y":return this.parseYear;case"y":return this.parseYearTwoDigits;default:return null}},n.prototype.parseDay=function(e,t){for(var n=0;"0"===e.substring(0,1);)e=e.substring(1),n++;var i=e.substring(0,2);if(!/[12][0-9]|3[01]/.test(i)&&(i=i.substring(0,1),!/[1-9]/.test(i)))throw new h;return t.setDate(parseInt(i,10)),n+i.length},n.prototype.parseDayOfWeekTextual=function(e,t){for(var n=0,i=0;i<this.translator.dayOfWeekTranslations.length;i++){var r=this.translator.dayOfWeekTranslations[i];if(n=Math.max(n,r.length),e.substring(0,r.length).toLowerCase()===r.toLowerCase())return r.length}for(var o=0;/[a-zA-Z]/.test(e.substring(0,1))&&(e=e.substring(1),++o!==n););return o},n.prototype.parseMonth=function(e,t){for(var n=0;"0"===e.substring(0,1);)e=e.substring(1),n++;var i=e.substring(0,2);if("10"!==i&&"11"!==i&&"12"!==i&&(i=i.substring(0,1),!/[1-9]/.test(i)))throw new h;return t.setMonth(parseInt(i,10)-1),n+i.length},n.prototype.parseMonthTextual=function(e,t){for(var n=0;n<this.translator.monthTranslations.length;n++){var i=this.translator.monthTranslations[n];if(e.substring(0,i.length).toLowerCase()===i.toLowerCase())return t.setMonth(n),i.length}throw new h},n.prototype.parseYear=function(e,t){var n=!1;"-"===e.substring(0,1)&&(n=!0,e=e.substring(1));for(var i=0;/[0-9]/.test(e.substring(i,i+1));)i++;var r=parseInt(e.substring(0,i),10);return n&&(r=-r),t.setFullYear(r),i+(n?1:0)},n.prototype.parseYearTwoDigits=function(e,t){var n=e.substring(0,2);if(!/[0-9]{2}/.test(n))throw new h;var i=(new Date).getFullYear().toString(),r=i.substring(0,i.length-2);return t.setFullYear(parseInt(r+n,10)),2},n);function n(e){this.escapeChar="\\",this.translator=e}e.DateConverter=t}(TheDatepicker=TheDatepicker||{}),function(e){var t=(n.resetTime=function(e){e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)},n);function n(){}e.DateHelper=t}(TheDatepicker=TheDatepicker||{}),function(n){var i,e;(e=i=i||{})[e.Untouched=0]="Untouched",e[e.WaitingOnFocus=1]="WaitingOnFocus",e[e.Ready=2]="Ready";var t=(d.prototype.setOptions=function(e){if(!(e instanceof n.Options))throw new Error("Options was expected to be an instance of Options, but "+e+" given.");this.options=e},d.prototype.setDateConverter=function(e){if("function"!=typeof e.formatDate||"function"!=typeof e.parseDate)throw new Error("Date converter was expected to be an instance of DateConverterInterface, but "+e+" given.");this.dateConverter=e},d.prototype.render=function(){var t=this;if(null===this.viewModel){if(this.initializationPhase===i.Ready){this.viewModel=new n.ViewModel(this.options,this),this.initListeners();var e=null;if(null!==this.input)try{e=this.dateConverter.parseDate(this.options.getInputFormat(),this.input.value)}catch(e){if(!(e instanceof n.CannotParseDateException))throw e}return this.render(),this.selectDate(e),void(this.input===this.document.activeElement&&this.open())}if(this.initializationPhase!==i.WaitingOnFocus){if(null!==this.input&&this.options.isHiddenOnBlur()&&""===this.input.value&&this.input!==this.document.activeElement)return this.originalInputOnFocus=this.input.onfocus||null,this.input.onfocus=function(e){null!==t.originalInputOnFocus&&t.originalInputOnFocus.call(t.input,e),t.initializationPhase=i.Ready,t.input.onfocus=t.originalInputOnFocus,t.render(),d.hasClickedViewModel=!0,t.open()},void(this.initializationPhase=i.WaitingOnFocus);this.initializationPhase=i.Ready,this.render()}}else this.viewModel.render()},d.prototype.open=function(){if(this.initializationPhase!==i.WaitingOnFocus){if(null===this.viewModel)throw new Error("Call render() first.");this.activateViewModel(this.viewModel),null!==this.input&&this.input.focus()}else this.input.focus()},d.prototype.close=function(){this.activateViewModel(null)},d.prototype.readInput=function(e){if(null!==this.input&&null!==this.viewModel)try{var t=this.dateConverter.parseDate(this.options.getInputFormat(),this.input.value);null!==t?this.viewModel.selectDateSince(e,t):this.viewModel.selectDate(e,null)}catch(e){if(!(e instanceof n.CannotParseDateException))throw e}},d.prototype.updateInput=function(){if(null!==this.input&&null!==this.viewModel&&this.input!==this.document.activeElement){var e=this.viewModel.getSelectedDate();this.input.value=null!==e?this.dateConverter.formatDate(this.options.getInputFormat(),e):""}},d.prototype.getContainer=function(){return this.container},d.prototype.getInput=function(){return this.input},d.prototype.selectDate=function(e){if(this.initializationPhase===i.WaitingOnFocus)return this.input.onfocus=this.originalInputOnFocus,this.initializationPhase=i.Ready,void this.render();if(null===this.viewModel)throw new Error("Call render() first.");return this.viewModel.selectDate(null,e)},d.prototype.getSelectedDate=function(){if(null===this.viewModel)throw new Error("Call render() first.");return this.viewModel.getSelectedDate()},d.prototype.createContainer=function(){var e=this.document.createElement("div");return e.style.position="absolute",e.style.zIndex="99",e},d.prototype.initListeners=function(){var n=this;if(0===d.viewModels.length){function t(){d.hasClickedViewModel?d.hasClickedViewModel=!1:n.activateViewModel(null)}var i=this.document.onmousedown||null;if(this.document.onmousedown=function(e){null!==i&&i.call(n.document,e),t()},this.document.addEventListener)this.document.addEventListener("focusin",t);else{var r=this.document.onfocusin||null;this.document.onfocusin=function(e){null!==r&&r.call(n.document,e),t()}}var o=this.document.onkeydown||null;this.document.onkeydown=function(e){null!==o&&o.call(n.document,e);var t=e.target||e.srcElement;null!==t&&t===n.input||null!==d.activeViewModel&&d.activeViewModel.triggerKeyPress(e,t)}}function a(){n.activateViewModel(n.viewModel),d.hasClickedViewModel=!0}d.viewModels.push(this.viewModel);var s=this.container.onmousedown||null;if(this.container.onmousedown=function(e){null!==s&&s.call(n.container,e),a()},this.container.addEventListener)this.container.addEventListener("focusin",a);else{var l=this.document.onfocusin||null;this.container.onfocusin=function(e){null!==l&&l.call(n.container,e),a()}}if(null!==this.input){var h=this.input.onmousedown||null;this.input.onmousedown=function(e){null!==h&&h.call(n.input,e),a()};var u=this.input.onfocus||null;this.input.onfocus=function(e){null!==u&&u.call(n.input,e),a()};var c=this.input.onblur||null;this.input.onblur=function(e){null!==c&&c.call(n.input,e),n.updateInput()};var p=this.input.onkeyup||null;this.input.onkeyup=function(e){null!==p&&p.call(n.input,e),n.readInput(e)}}},d.prototype.activateViewModel=function(e){if(d.activeViewModel!==e){d.activeViewModel=e;for(var t=0;t<d.viewModels.length;t++)d.viewModels[t].setActive(d.viewModels[t]===e)}},d.prototype.isElement=function(e){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument},d.viewModels=[],d.activeViewModel=null,d.hasClickedViewModel=!1,d);function d(e,t){if(void 0===t&&(t=null),this.initializationPhase=i.Untouched,this.originalInputOnFocus=null,(this.viewModel=null)!==e&&!this.isElement(e))throw new Error("Input was expected to be null or an HTMLElement.");if(null!==t&&!this.isElement(t))throw new Error("Container was expected to be null or an HTMLElement.");if(null===e&&null===t)throw new Error("At least one of input or container is mandatory.");this.document=document,null===t&&(t=this.createContainer(),null!==e&&e.parentNode.insertBefore(t,e.nextSibling)),null!==e&&(e.datepicker=this),(t.datepicker=this).input=e,this.container=t,this.setOptions(new n.Options),this.setDateConverter(new n.DateConverter(this.options.getTranslator()))}n.Datepicker=t}(TheDatepicker=TheDatepicker||{}),function(t){var e=(n.prototype.getDate=function(){return new Date(this.year,this.month-1,this.dayNumber,0,0,0,0)},n.prototype.isEqualToDate=function(e){return null!==e&&this.dayNumber===e.getDate()&&this.month===e.getMonth()+1&&this.year===e.getFullYear()},n.prototype.isEqualToDay=function(e){return null!==e&&this.dayNumber===e.dayNumber&&this.month===e.month&&this.year===e.year},n);function n(e){this.isToday=!1,this.isPast=!1,this.isAvailable=!0,this.isInValidity=!0,this.isInCurrentMonth=!0,this.isSelected=!1,this.isHighlighted=!1,this.isFocused=!1,this.dayNumber=e.getDate(),this.month=e.getMonth()+1,this.year=e.getFullYear(),this.dayOfWeek=e.getDay(),this.isWeekend=this.dayOfWeek===t.DayOfWeek.Saturday||this.dayOfWeek===t.DayOfWeek.Sunday}t.Day=e}(TheDatepicker=TheDatepicker||{}),function(e){var t=(n.prototype.setClassesPrefix=function(e){if("string"!=typeof e)throw new Error("Classes prefix was expected to be a string, but "+typeof e+" given.");this.classesPrefix=e},n.prototype.createDiv=function(e){var t=this.document.createElement("div");return this.addClass(t,e),t},n.prototype.createAnchor=function(t){var e=this.document.createElement("a");return this.addClass(e,"button"),e.href="#",e.onclick=function(e){e.preventDefault(),t(e)},e},n.prototype.createSpan=function(){return this.document.createElement("span")},n.prototype.createTable=function(e,t,n){var i=this.document.createElement("table");return this.addClass(i,e),i.appendChild(t),i.appendChild(n),i},n.prototype.createTableHeader=function(e,t){var n=this.document.createElement("thead");this.addClass(n,e);for(var i=this.document.createElement("tr"),r=0;r<t.length;r++)i.appendChild(t[r]);return n.appendChild(i),n},n.prototype.createTableHeaderCell=function(e){var t=this.document.createElement("th");return this.addClass(t,e),t},n.prototype.createTableBody=function(e,t){var n=this.document.createElement("tbody");this.addClass(n,e);for(var i=0;i<t.length;i++)n.appendChild(t[i]);return n},n.prototype.createTableRow=function(e,t){for(var n=this.document.createElement("tr"),i=0;i<t.length;i++)n.appendChild(t[i]);return n},n.prototype.createTableCell=function(e){var t=this.document.createElement("td");return this.addClass(t,e),t},n.prototype.addClass=function(e,t){this.toggleClass(e,t,!0)},n.prototype.removeClass=function(e,t){this.toggleClass(e,t,!1)},n.prototype.toggleClass=function(e,t,n){if(!/^[a-zA-Z0-9_-]+$/.test(t))throw new Error("Invalid class name: "+t);t=this.classesPrefix+t;for(var i=!1,r=e.className.split(/\s+/),o=0;o<r.length;o++)if(""===r[o]&&r.splice(o,1),r[o]===t){if(n)return;r.splice(o,1),i=!0}if(n)r.push(t);else if(!i)return;e.className=r.join(" ")},n);function n(){this.classesPrefix="the-datepicker-",this.document=document}e.HtmlHelper=t}(TheDatepicker=TheDatepicker||{}),function(r){var t,e,n,i;(e=t=r.MoveDirection||(r.MoveDirection={}))[e.Left=-1]="Left",e[e.Up=-7]="Up",e[e.Right=1]="Right",e[e.Down=7]="Down",(i=n=r.KeyCode||(r.KeyCode={}))[i.Enter=13]="Enter",i[i.Space=32]="Space",i[i.Left=37]="Left",i[i.Up=38]="Up",i[i.Right=39]="Right",i[i.Down=40]="Down";var o=(a.prototype.render=function(){null!==this.selectedDate&&(this.createDay(this.selectedDate).isAvailable||(this.selectedDate=null)),this.currentMonth=this.options.getInitialMonth(this.currentMonth),this.options.getTemplate().render(this,this.datepicker),this.datepicker.updateInput()},a.prototype.setActive=function(e){this.active!==e&&(this.active=e,this.options.isHiddenOnBlur()&&this.render())},a.prototype.isActive=function(){return this.active},a.prototype.getCurrentMonth=function(){if(null===this.currentMonth)throw new Error("Call render() first.");return this.currentMonth},a.prototype.canGoBack=function(){var e=new Date(this.getCurrentMonth().getTime());return e.setMonth(e.getMonth()-1),this.canGoToMonth(e)},a.prototype.canGoForward=function(){var e=new Date(this.getCurrentMonth().getTime());return e.setMonth(e.getMonth()+1),this.canGoToMonth(e)},a.prototype.canGoToMonth=function(e){if(null!==this.options.getMinDate()){var t=new Date(this.options.getMinDate().getTime());if(t.setDate(1),t.getTime()>e.getTime())return!1}if(null!==this.options.getMaxDate()){var n=new Date(this.options.getMaxDate().getTime());if(n.setDate(1),n.getTime()<e.getTime())return!1}return!0},a.prototype.goBack=function(){var e=new Date(this.getCurrentMonth().getTime());e.setMonth(e.getMonth()-1),this.goToMonth(e)},a.prototype.goForward=function(){var e=new Date(this.getCurrentMonth().getTime());e.setMonth(e.getMonth()+1),this.goToMonth(e)},a.prototype.goToMonth=function(e,t){return void 0===t&&(t=!0),(e=new Date(e.getTime())).setDate(1),r.DateHelper.resetTime(e),!(!this.canGoToMonth(e)||e.getTime()===this.getCurrentMonth().getTime()||(this.currentMonth=e,t&&this.cancelHighlight()||this.render(),0))},a.prototype.selectDay=function(e,t){t.isAvailable&&(t.isEqualToDate(this.selectedDate)||this.triggerOnBeforeSelect(e,t)&&(this.selectedDate=t.getDate(),this.highlightedDay=t,this.isHighlightedDayFocused=!0,this.render(),this.triggerOnSelect(e,t)))},a.prototype.selectDate=function(e,t){if(null===t)return this.cancelSelection(e);var n=this.createDay(t);return!(!n.isAvailable||n.isEqualToDate(this.selectedDate)||!this.triggerOnBeforeSelect(e,n)||(this.selectedDate=n.getDate(),this.goToMonth(t)||this.render(),this.triggerOnSelect(e,n),0))},a.prototype.selectDateSince=function(e,t){var n=this.options.getMaxDate(),i=100,r=this.createDay(t);for(t=r.getDate();!r.isAvailable&&0<i&&(t.setDate(r.dayNumber+1),!(null!==n&&t.getTime()>n.getTime()));)r=this.createDay(t),i--;this.selectDate(e,t)},a.prototype.highlightDay=function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!1),!e.isAvailable)return!1;if(e.isEqualToDay(this.highlightedDay))return!1;this.highlightedDay=e,this.isHighlightedDayFocused=t;var i=!1,r=e.getDate();return n&&(i=this.goToMonth(r,!1)),i||this.render(),!0},a.prototype.highlightFirstAvailableDay=function(){for(var e=new Date(this.getCurrentMonth().getTime()),t=this.options.getMaxDate(),n=this.createDay(e);!(n.isAvailable||(e.setDate(n.dayNumber+1),1===e.getDate())||null!==t&&e.getTime()>t.getTime());)n=this.createDay(e);this.highlightDay(n)},a.prototype.highlightSiblingDay=function(e,t){var n=e,i=n.getDate(),r=30;do{if(i.setDate(n.dayNumber+t),!(n=this.createDay(i)).isInValidity)break;r--}while(!n.isAvailable&&0<r);this.highlightDay(n,!0,!0)},a.prototype.hoverDay=function(e){return!!this.options.isHoverEnabled()&&this.highlightDay(e,!1)},a.prototype.cancelSelection=function(e){return null!==this.selectedDate&&!!this.triggerOnBeforeSelect(e,null)&&(this.selectedDate=null,this.render(),this.triggerOnSelect(e,null),!0)},a.prototype.cancelHighlight=function(){return null!==this.highlightedDay&&(this.highlightedDay=null,this.render(),!0)},a.prototype.cancelHover=function(){this.options.isHoverEnabled()&&this.cancelHighlight()},a.prototype.getWeekDays=function(){for(var e=[],t=0;t<7;t++)e.push((this.options.getFirstDayOfWeek()+t)%7);return e},a.prototype.getWeeks=function(){var e,t=[],n=this.getCurrentMonth(),i=new Date(n.getFullYear(),n.getMonth(),1),r=new Date(n.getFullYear(),n.getMonth(),0).getDate();for(e=r-(i.getDay()-this.options.getFirstDayOfWeek()+7)%7+1;e<=r;e++)(l=this.createDay(new Date(n.getFullYear(),n.getMonth()-1,e))).isInCurrentMonth=!1,t.push(l);var o=new Date(n.getFullYear(),n.getMonth()+1,0),a=o.getDate();for(e=1;e<=a;e++)t.push(this.createDay(new Date(n.getFullYear(),n.getMonth(),e)));var s=6-(o.getDay()-this.options.getFirstDayOfWeek()+7)%7;for(e=1;e<=s;e++){var l;(l=this.createDay(new Date(n.getFullYear(),n.getMonth()+1,e))).isInCurrentMonth=!1,t.push(l)}for(var h=[],u=0;u<t.length;u+=7)h.push(t.slice(u,u+7));return h},a.prototype.getSelectedDate=function(){return this.selectedDate},a.prototype.triggerKeyPress=function(e,t){-1<[n.Left,n.Up,n.Right,n.Down].indexOf(e.keyCode)&&(e.preventDefault(),null!==this.highlightedDay?this.highlightSiblingDay(this.highlightedDay,this.translateKeyCodeToMoveDirection(e.keyCode)):null!==this.selectedDate&&this.selectedDate.getFullYear()===this.getCurrentMonth().getFullYear()&&this.selectedDate.getMonth()===this.getCurrentMonth().getMonth()?this.highlightSiblingDay(this.createDay(this.selectedDate),this.translateKeyCodeToMoveDirection(e.keyCode)):this.highlightFirstAvailableDay())},a.prototype.triggerOnBeforeSelect=function(t,n){return this.options.triggerEvent(r.EventType.BeforeSelect,function(e){return e(t,n)})},a.prototype.triggerOnSelect=function(t,n){this.options.triggerEvent(r.EventType.Select,function(e){return e(t,n)})},a.prototype.createDay=function(e){e=new Date(e.getTime()),r.DateHelper.resetTime(e);var t=e.getTime(),n=this.today.getTime(),i=new r.Day(e);return i.isToday=t===n,i.isPast=t<n,i.isInValidity=(null===this.options.getMinDate()||t>=this.options.getMinDate().getTime())&&(null===this.options.getMaxDate()||t<=this.options.getMaxDate().getTime()),i.isAvailable=i.isInValidity&&this.options.isDateAvailable(e),i.isAvailable&&(i.isEqualToDate(this.selectedDate)&&(i.isSelected=!0),i.isEqualToDay(this.highlightedDay)&&(i.isHighlighted=!0,this.isHighlightedDayFocused&&(i.isFocused=!0))),i},a.prototype.translateKeyCodeToMoveDirection=function(e){switch(e){case n.Left:return t.Left;case n.Up:return t.Up;case n.Right:return t.Right;case n.Down:return t.Down;default:throw new Error("Invalid key code: "+e)}},a);function a(e,t){this.options=e,this.datepicker=t,this.selectedDate=null,this.highlightedDay=null,this.isHighlightedDayFocused=!1,this.active=!1;var n=new Date;r.DateHelper.resetTime(n),this.today=n}r.ViewModel=o}(TheDatepicker=TheDatepicker||{}),function(r){var e=(t.prototype.render=function(e,t){if(null===this.containerElement){var n=t.getContainer();n.innerHTML="",n.appendChild(this.createSkeleton(e,t))}this.updateContainerElement(e),this.updateCloseElement(e,t.getInput()),this.updateGoBackElement(e),this.updateGoForwardElement(e),this.updateMonthElement(e),this.updateYearElement(e),this.updateWeeksElements(e)},t.prototype.setClassesPrefix=function(e){this.htmlHelper.setClassesPrefix(e)},t.prototype.getCellHtml=function(e,t){return t.dayNumber.toString()},t.prototype.createSkeleton=function(e,t){var n=this.htmlHelper.createDiv("container");return n.appendChild(this.createHeaderElement(e,t)),n.appendChild(this.createBodyElement(e)),this.containerElement=n},t.prototype.updateContainerElement=function(e){this.containerElement.style.display=e.isActive()||!this.options.isHiddenOnBlur()?"block":"none"},t.prototype.createHeaderElement=function(e,t){var n=this.htmlHelper.createDiv("title");n.appendChild(this.createMonthElement(e)),n.appendChild(this.createYearElement(e));var i=this.htmlHelper.createDiv("navigation");i.appendChild(this.createGoBackElement(e)),i.appendChild(n),i.appendChild(this.createGoForwardElement(e));var r=this.htmlHelper.createDiv("header");return r.appendChild(this.createCloseElement(e,t)),r.appendChild(i),r},t.prototype.createCloseElement=function(e,t){var n=this.htmlHelper.createDiv("close"),i=this.htmlHelper.createAnchor(function(){t.close()});return i.onkeydown=function(e){-1<[r.KeyCode.Enter,r.KeyCode.Space].indexOf(e.keyCode)&&(e.preventDefault(),t.close())},i.innerHTML=this.closeHtml,n.appendChild(i),this.closeElement=n},t.prototype.updateCloseElement=function(e,t){this.closeElement.style.display=null!==t&&this.options.isHiddenOnBlur()?"block":"none"},t.prototype.createGoBackElement=function(e){return this.createGoElement(e,!1)},t.prototype.createGoForwardElement=function(e){return this.createGoElement(e,!0)},t.prototype.createGoElement=function(t,n){var e=this.htmlHelper.createDiv("go");this.htmlHelper.addClass(e,n?"go-next":"go-previous");var i=this.htmlHelper.createAnchor(function(){n?t.goForward():t.goBack()});return i.onkeydown=function(e){-1<[r.KeyCode.Enter,r.KeyCode.Space].indexOf(e.keyCode)&&(e.preventDefault(),n?t.goForward():t.goBack())},i.innerHTML=n?this.goForwardHtml:this.goBackHtml,e.appendChild(i),n?this.goForwardElement=i:this.goBackElement=i,e},t.prototype.updateGoBackElement=function(e){this.goBackElement.style.visibility=e.canGoBack()?"visible":"hidden"},t.prototype.updateGoForwardElement=function(e){this.goForwardElement.style.visibility=e.canGoForward()?"visible":"hidden"},t.prototype.createMonthElement=function(e){var t=this.htmlHelper.createDiv("month");return this.monthElement=t},t.prototype.updateMonthElement=function(e){this.monthElement.innerText=this.options.getTranslator().translateMonth(e.getCurrentMonth().getMonth())},t.prototype.createYearElement=function(e){var t=this.htmlHelper.createDiv("year");return this.yearElement=t},t.prototype.updateYearElement=function(e){this.yearElement.innerText=e.getCurrentMonth().getFullYear().toString()},t.prototype.createTableElement=function(e){var t=this.createTableHeaderElement(e),n=this.createTableBodyElement(e);return this.htmlHelper.createTable("table",t,n)},t.prototype.createTableHeaderElement=function(e){for(var t=e.getWeekDays(),n=[],i=0;i<t.length;i++){var r=t[i];n.push(this.createTableHeaderCellElement(e,r))}return this.htmlHelper.createTableHeader("table-header",n)},t.prototype.createTableHeaderCellElement=function(e,t){var n=this.htmlHelper.createTableHeaderCell("table-header-cell");return t!==r.DayOfWeek.Saturday&&t!==r.DayOfWeek.Sunday||this.htmlHelper.addClass(n,"weekend"),n.innerText=this.options.getTranslator().translateDayOfWeek(t),n},t.prototype.createTableBodyElement=function(e){this.daysElements=[],this.daysContentsElements=[];for(var t=[],n=0;n<this.maxWeeks;n++)t.push(this.createTableRowElement(e));return this.weeksElements=t,this.htmlHelper.createTableBody("table-body",t)},t.prototype.updateWeeksElements=function(e){for(var t=e.getWeeks(),n=0;n<this.weeksElements.length;n++){var i=this.weeksElements[n],r=t.length>n?t[n]:null;if(i.style.display=null!==r?"table-row":"none",null!==r)for(var o=0;o<this.daysElements[n].length;o++)this.updateDayElement(e,this.daysElements[n][o],this.daysContentsElements[n][o],r[o])}},t.prototype.createTableRowElement=function(e){for(var t=[],n=[],i=0;i<this.daysInWeekCount;i++){var r=this.htmlHelper.createTableCell("day"),o=this.createTableCellContentElement(e);t.push(r),n.push(o),r.appendChild(o)}return this.daysElements.push(t),this.daysContentsElements.push(n),this.htmlHelper.createTableRow("week",t)},t.prototype.updateDayElement=function(e,t,n,i){if(!(n.day=i).isInCurrentMonth&&!this.areDaysOutOfMonthVisible)return t.className="",n.innerHTML="",void n.removeAttribute("href");this.htmlHelper.toggleClass(t,"today",i.isToday),this.htmlHelper.toggleClass(t,"weekend",i.isWeekend),this.htmlHelper.toggleClass(t,"unavailable",!i.isAvailable),this.htmlHelper.toggleClass(t,"highlighted",i.isHighlighted),this.htmlHelper.toggleClass(t,"selected",i.isSelected),n.innerHTML=this.getCellHtml(e,i),i.isAvailable?n.href="#":n.removeAttribute("href"),i.isFocused&&n.focus()},t.prototype.createTableCellContentElement=function(t){var n=this.htmlHelper.createAnchor(function(e){t.selectDay(e,n.day)});return n.onfocus=function(){t.highlightDay(n.day)},n.onmouseenter=function(){t.hoverDay(n.day)},n.onmouseleave=function(){t.cancelHover()},n.onkeydown=function(e){-1<[r.KeyCode.Enter,r.KeyCode.Space].indexOf(e.keyCode)&&(e.preventDefault(),t.selectDay(e,n.day))},n},t.prototype.createBodyElement=function(e){var t=this.htmlHelper.createDiv("body");return t.appendChild(this.createTableElement(e)),t},t);function t(e,t){this.goBackHtml="&lt;",this.goForwardHtml="&gt;",this.closeHtml="&times;",this.maxWeeks=6,this.daysInWeekCount=7,this.containerElement=null,this.goBackElement=null,this.goForwardElement=null,this.closeElement=null,this.monthElement=null,this.yearElement=null,this.weeksElements=[],this.daysElements=[],this.daysContentsElements=[],this.options=e,this.htmlHelper=t}r.Template=e}(TheDatepicker=TheDatepicker||{}),function(r){var t,e;(e=t=r.EventType||(r.EventType={})).BeforeSelect="beforeSelect",e.Select="select";var n=(i.prototype.setTemplate=function(e){if(!(e instanceof r.Template))throw new Error("Template was expected to an instance of Template, but "+e+" given.");this.template=e},i.prototype.setTranslator=function(e){if(!(e instanceof r.Translator))throw new Error("Translator was expected to an instance of Translator, but "+e+" given.");this.translator=e},i.prototype.setHideOnBlur=function(e){if("boolean"!=typeof e)throw new Error("Whether to hide on blur was expected to boolean, but "+e+" given.");this.hideOnBlur=e},i.prototype.setHideOnSelect=function(e){if("boolean"!=typeof e)throw new Error("Whether to hide on select was expected to boolean, but "+e+" given.");this.hideOnSelect=e},i.prototype.setMinDate=function(e){var t=this.normalizeDate(e,"Min date");this.checkConstraints(t,this.maxDate),this.minDate=t},i.prototype.setMaxDate=function(e){var t=this.normalizeDate(e,"Max date");this.checkConstraints(this.minDate,t),this.maxDate=t},i.prototype.setInitialMonth=function(e){this.initialMonth=this.normalizeDate(e,"Initial month")},i.prototype.setFirstDayOfWeek=function(e){switch(e){case r.DayOfWeek.Monday:case r.DayOfWeek.Tuesday:case r.DayOfWeek.Wednesday:case r.DayOfWeek.Thursday:case r.DayOfWeek.Friday:case r.DayOfWeek.Saturday:case r.DayOfWeek.Sunday:this.firstDayOfWeek=e;break;default:throw new Error("First day of week was expected to be TheDatepicker.DayOfWeek constant, but "+e+" given.")}},i.prototype.setDateAvailabilityResolver=function(e){if(null===e&&(this.dateAvailabilityResolver=null),"function"!=typeof e)throw new Error("Date availability resolver was expected to be function or null, but "+typeof e+" given.");this.dateAvailabilityResolver=e},i.prototype.setInputFormat=function(e){if("string"!=typeof e||""===e)throw new Error("Input format was expected to be a non empty string, but "+(""===e?"empty string":typeof e)+" given.");this.inputFormat=e},i.prototype.setHoverEnabled=function(e){if("boolean"!=typeof e)throw new Error("Whether is hover enabled was expected to boolean, but "+e+" given.");this.hoverEnabled=e},i.prototype.onBeforeSelect=function(e){if("function"!=typeof e)throw new Error("Event listener was expected to be function, but "+typeof e+" given.");this.listeners.beforeSelect.push(e)},i.prototype.offBeforeSelect=function(e){this.offEventListener(t.BeforeSelect,e)},i.prototype.onSelect=function(e){if("function"!=typeof e)throw new Error("Event listener was expected to be function, but "+typeof e+" given.");this.listeners.select.push(e)},i.prototype.offSelect=function(e){this.offEventListener(t.Select,e)},i.prototype.getTemplate=function(){return this.template},i.prototype.getTranslator=function(){return this.translator},i.prototype.getInitialMonth=function(e){void 0===e&&(e=null);var t=null!==e?new Date(e.getTime()):null!==this.initialMonth?new Date(this.initialMonth.getTime()):new Date;if(t.setDate(1),r.DateHelper.resetTime(t),null!==this.minDate){var n=new Date(this.minDate.getTime());if(n.setDate(1),t<n)return n}if(null!==this.maxDate){var i=new Date(this.maxDate.getTime());if(i.setDate(1),i<t)return i}return t},i.prototype.getFirstDayOfWeek=function(){return this.firstDayOfWeek},i.prototype.isHoverEnabled=function(){return this.hoverEnabled},i.prototype.getMinDate=function(){return this.minDate},i.prototype.getMaxDate=function(){return this.maxDate},i.prototype.isDateAvailable=function(e){return null===this.dateAvailabilityResolver||this.dateAvailabilityResolver(e)},i.prototype.isHiddenOnBlur=function(){return this.hideOnBlur},i.prototype.isHiddenOnSelect=function(){return this.hideOnSelect},i.prototype.getInputFormat=function(){return this.inputFormat},i.prototype.normalizeDate=function(e,t){if(null===e)return null;if("string"==typeof e){var n=new Date(e);if(!isNaN(n.getTime()))return r.DateHelper.resetTime(n),n}else if("object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime()))return n=new Date(e.getTime()),r.DateHelper.resetTime(n),n;throw new Error(t+" was expected to be a valid Date string or valid instance of Date or null, "+e+" given.")},i.prototype.checkConstraints=function(e,t){if(null!==e&&null!==t&&e.getTime()>t.getTime())throw new Error("Min date cannot be higher then max date, given min: "+e.toString()+", max: "+t.toString())},i.prototype.offEventListener=function(e,t){if(null===t)this.listeners[e]=[];else{for(var n=[],i=0;i<this.listeners[e].length;i++)this.listeners[e][i]!==t&&n.push(this.listeners[e][i]);this.listeners[e]=n}},i.prototype.triggerEvent=function(e,t){for(var n=0;n<this.listeners[e].length;n++)if(!1===t(this.listeners[e][n]))return!1;return!0},i);function i(){this.hideOnBlur=!0,this.hideOnSelect=!0,this.minDate=null,this.maxDate=null,this.initialMonth=null,this.firstDayOfWeek=r.DayOfWeek.Monday,this.dateAvailabilityResolver=null,this.inputFormat="j. n. Y",this.hoverEnabled=!0,this.listeners={beforeSelect:[],select:[]},this.setTemplate(new r.Template(this,new r.HtmlHelper)),this.setTranslator(new r.Translator)}r.Options=n}(TheDatepicker=TheDatepicker||{});