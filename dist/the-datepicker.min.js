var TheDatepicker;!function(n){var t=(e.prototype.setDayOfWeekTranslation=function(t,e){this.dayOfWeekTranslations[n.Helper.checkNumber("First day of week",t,0,6)]=n.Helper.checkString("Translation",e)},e.prototype.setMonthTranslation=function(t,e){this.monthTranslations[n.Helper.checkNumber("Month",t,0,11)]=n.Helper.checkString("Translation",e)},e.prototype.translateDayOfWeek=function(t){return this.dayOfWeekTranslations[t]},e.prototype.translateMonth=function(t){return this.monthTranslations[t]},e);function e(){this.dayOfWeekTranslations=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthTranslations=["January","February","March","April","May","June","July","August","September","October","November","December"]}n.Translator=t}(TheDatepicker=TheDatepicker||{}),function(t){var h=function(){};t.CannotParseDateException=h;var u=(e.prototype.createDate=function(){if(null===this.day||null===this.month||null===this.year)throw new h;var t=new Date(this.year,this.month-1,this.day);if(isNaN(t.getTime()))throw new h;for(;t.getDate()!==this.day||t.getMonth()!==this.month-1||t.getFullYear()!==this.year;){if(!(28<this.day))throw new h;this.day--,t=new Date(this.year,this.month-1,this.day)}return t},e);function e(){this.day=null,this.month=null,this.year=null}var n=(i.prototype.formatDate=function(t,e){for(var n=!1,i="",o=0;o<t.length;o++){var r=t.substring(o,o+1);if(n)i+=r,n=!1;else if(r!==this.escapeChar){var s=this.getFormatter(r);i+=null===s?r:s.call(this,e)}else n=!0}return i},i.prototype.parseDate=function(t,e){if(""===e)return null;for(var n=new u,i=!1,o=0,r=0;r<t.length;r++){var s=t.substring(r,r+1);if(i)i=!1;else{if(s===this.escapeChar){i=!0;continue}var l=this.getParser(s);if(null!==l){try{o+=l.call(this,e.substring(o),n)}catch(t){if(!(t instanceof h))throw t;if(" "!==e.substring(o,o+1))throw t;o++,r--;continue}continue}}var a=e.substring(o,o+1);if(a===s)o++;else{if(" "===s)continue;if(" "!==a)throw new h;o++,r--}}return n.createDate()},i.prototype.getFormatter=function(t){switch(t){case"j":return this.formatDay;case"d":return this.formatDayWithLeadingZero;case"D":return this.formatDayOfWeekTextual;case"n":return this.formatMonth;case"m":return this.formatMonthWithLeadingZero;case"F":return this.formatMonthTextual;case"Y":return this.formatYear;case"y":return this.formatYearTwoDigits;default:return null}},i.prototype.formatDay=function(t){return t.getDate().toString()},i.prototype.formatDayWithLeadingZero=function(t){var e=t.getDate().toString();return 1===e.length&&(e="0"+e),e},i.prototype.formatDayOfWeekTextual=function(t){return this.translator.translateDayOfWeek(t.getDay())},i.prototype.formatMonth=function(t){return(t.getMonth()+1).toString()},i.prototype.formatMonthWithLeadingZero=function(t){var e=(t.getMonth()+1).toString();return 1===e.length&&(e="0"+e),e},i.prototype.formatMonthTextual=function(t){return this.translator.translateMonth(t.getMonth())},i.prototype.formatYear=function(t){return t.getFullYear().toString()},i.prototype.formatYearTwoDigits=function(t){var e=t.getFullYear().toString();return e.substring(e.length-2)},i.prototype.getParser=function(t){switch(t){case"j":case"d":return this.parseDay;case"D":return this.parseDayOfWeekTextual;case"n":case"m":return this.parseMonth;case"F":return this.parseMonthTextual;case"Y":return this.parseYear;case"y":return this.parseYearTwoDigits;default:return null}},i.prototype.parseDay=function(t,e){for(var n=0;"0"===t.substring(0,1);)t=t.substring(1),n++;var i=t.substring(0,2);if(!/[12][0-9]|3[01]/.test(i)&&(i=i.substring(0,1),!/[1-9]/.test(i)))throw new h;return e.day=parseInt(i,10),n+i.length},i.prototype.parseDayOfWeekTextual=function(t){for(var e=0,n=0;n<7;n++){var i=this.translator.translateDayOfWeek(n);if(e=Math.max(e,i.length),t.substring(0,i.length).toLowerCase()===i.toLowerCase())return i.length}for(var o=0;/[a-zA-Z]/.test(t.substring(0,1))&&(t=t.substring(1),++o!==e););return o},i.prototype.parseMonth=function(t,e){for(var n=0;"0"===t.substring(0,1);)t=t.substring(1),n++;var i=t.substring(0,2);if("10"!==i&&"11"!==i&&"12"!==i&&(i=i.substring(0,1),!/[1-9]/.test(i)))throw new h;return e.month=parseInt(i,10),n+i.length},i.prototype.parseMonthTextual=function(t,e){for(var n=1;n<=12;n++){var i=this.translator.translateMonth(n-1);if(t.substring(0,i.length).toLowerCase()===i.toLowerCase())return e.month=n,i.length}throw new h},i.prototype.parseYear=function(t,e){var n=!1;"-"===t.substring(0,1)&&(n=!0,t=t.substring(1));for(var i=0;/[0-9]/.test(t.substring(i,i+1));)i++;if(0===i)throw new h;var o=parseInt(t.substring(0,i),10);return n&&(o=-o),e.year=o,i+(n?1:0)},i.prototype.parseYearTwoDigits=function(t,e){var n=t.substring(0,2);if(!/[0-9]{2}/.test(n))throw new h;var i=(new Date).getFullYear().toString(),o=i.substring(0,i.length-2);return e.year=parseInt(o+n,10),2},i);function i(t){this.translator=t,this.escapeChar="\\"}t.DateConverter=n}(TheDatepicker=TheDatepicker||{}),function(o){var r,t;(t=r=r||{})[t.Untouched=0]="Untouched",t[t.Waiting=1]="Waiting",t[t.Ready=2]="Ready",t[t.Initialized=3]="Initialized",t[t.Destroyed=4]="Destroyed";var e=(i.prototype.render=function(){var e=this;switch(this.initializationPhase){case r.Destroyed:return;case r.Initialized:return void this.viewModel.render();case r.Ready:return this.initListeners(),this.initializationPhase=r.Initialized,void this.render();case r.Waiting:return this.options.isHiddenOnBlur()?(this.updateDeselectButton(),void(null===this.viewModel.selectedDate||this.options.isDateInValidity(this.viewModel.selectedDate)&&this.options.isDateAvailable(this.viewModel.selectedDate)?null!=this.viewModel.selectedDate||this.options.isAllowedEmpty()||this.viewModel.selectDay(null,this.options.getInitialDate(),!1):this.viewModel.cancelSelection(null))):void this.open();case r.Untouched:if(this.preselectFromInput(),this.createDeselectElement(),this.viewModel.selectDay(null,this.options.getInitialDate(),!1),this.updateInput(),null!==this.input&&this.options.isHiddenOnBlur())return this.input===this.document.activeElement?(this.initializationPhase=r.Ready,this.render(),void this.open()):(this.inputListenerRemover=o.Helper.addEventListener(this.input,o.ListenerType.Focus,function(t){e.open(t)}),void(this.initializationPhase=r.Waiting));this.initializationPhase=r.Ready,this.render()}},i.prototype.open=function(t){return void 0===t&&(t=null),this.initializationPhase===r.Untouched&&this.render(),this.initializationPhase===r.Waiting&&(this.initializationPhase=r.Ready,this.render(),i.hasClickedViewModel=!0),!!i.activateViewModel(t,this)&&(null!==this.input&&this.input.focus(),!0)},i.prototype.close=function(t){return void 0===t&&(t=null),!this.viewModel.isActive()||!!i.activateViewModel(t,null)&&(null!==this.input&&this.input.blur(),!0)},i.prototype.reset=function(t){return void 0===t&&(t=null),this.viewModel.reset(t)},i.prototype.destroy=function(){if(this.initializationPhase!==r.Destroyed){for(var t=0;t<this.listenerRemovers.length;t++)this.listenerRemovers[t]();this.listenerRemovers=[],this.isContainerExternal?this.container.innerHTML="":this.container.parentNode.removeChild(this.container),(this.container.datepicker=null)!==this.input&&(this.input.datepicker=null,this.removeInitialInputListener(),this.input=null),null!==this.deselectElement&&(this.deselectElement.parentNode.removeChild(this.deselectElement),this.deselectElement=null),this.initializationPhase=r.Destroyed}},i.prototype.selectDate=function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=null),this.viewModel.selectDay(n,o.Helper.normalizeDate("Date",t),e)},i.prototype.getSelectedDate=function(){return this.viewModel.selectedDate},i.prototype.goToMonth=function(t,e){return void 0===e&&(e=null),this.viewModel.goToMonth(e,o.Helper.normalizeDate("Month",t))},i.prototype.readInput=function(t){if(void 0===t&&(t=null),null===this.input)return!1;try{var e=this.dateConverter.parseDate(this.options.getInputFormat(),this.input.value);return null!==e?this.viewModel.selectDateSince(t,e):this.viewModel.cancelSelection(t)}catch(t){if(!(t instanceof o.CannotParseDateException))throw t;return!1}},i.prototype.updateInput=function(){null!==this.input&&this.input!==this.document.activeElement&&(this.input.value=null!==this.viewModel.selectedDate?this.dateConverter.formatDate(this.options.getInputFormat(),this.viewModel.selectedDate):"",this.updateDeselectButton())},i.prototype.createContainer=function(){var t=this.document.createElement("div");return t.className=this.options.getClassesPrefix()+"container",t.style.position="absolute",t.style.zIndex="99",t},i.prototype.createDeselectElement=function(){var e=this;if(null===this.input||!this.options.isDeselectButtonShown())return null;var t=this.document.createElement("span");t.style.position="absolute";var n=this.document.createElement("a");n.innerHTML=this.options.getDeselectHtml(),n.style.position="relative",n.style.left="-0.8em",n.href="#",n.onclick=function(t){t=t||window.event,o.Helper.preventDefault(t),e.viewModel.cancelSelection(t)},t.className=this.options.getClassesPrefix()+"deselect",t.appendChild(n),this.input.parentNode.insertBefore(t,this.input.nextSibling),this.deselectElement=t},i.prototype.updateDeselectButton=function(){if(null!==this.input&&null!==this.deselectElement){var t=this.options.isDeselectButtonShown()&&""!==this.input.value;this.deselectElement.style.visibility=t?"visible":"hidden"}},i.prototype.preselectFromInput=function(){if(null!==this.input)try{var t=this.dateConverter.parseDate(this.options.getInputFormat(),this.input.value);null!==t&&this.options.setInitialDate(t)}catch(t){if(!(t instanceof o.CannotParseDateException))throw t}},i.prototype.initListeners=function(){var e=this;if(!i.areGlobalListenersInitialized){function t(t){i.hasClickedViewModel?i.hasClickedViewModel=!1:i.activateViewModel(t,null)}o.Helper.addEventListener(this.document,o.ListenerType.MouseDown,t),o.Helper.addEventListener(this.document,o.ListenerType.FocusIn,t),o.Helper.addEventListener(this.document,o.ListenerType.KeyDown,function(t){null!==i.activeViewModel&&i.activeViewModel.triggerKeyPress(t)}),i.areGlobalListenersInitialized=!0}function n(t){i.activateViewModel(t,e),i.hasClickedViewModel=!0}this.removeInitialInputListener(),this.listenerRemovers.push(o.Helper.addEventListener(this.container,o.ListenerType.MouseDown,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.container,o.ListenerType.FocusIn,n)),null!==this.deselectElement&&(this.listenerRemovers.push(o.Helper.addEventListener(this.deselectElement,o.ListenerType.MouseDown,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.deselectElement,o.ListenerType.FocusIn,n))),null!==this.input&&(this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.MouseDown,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.Focus,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.Blur,function(){e.updateInput()})),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.KeyDown,function(t){o.Helper.stopPropagation(t)})),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.KeyUp,function(t){e.readInput(t)})))},i.prototype.removeInitialInputListener=function(){null!==this.inputListenerRemover&&(this.inputListenerRemover(),this.inputListenerRemover=null)},i.prototype.triggerReady=function(t){if(void 0!==t.datepickerReadyListeners)for(var e=0;e<t.datepickerReadyListeners.length;e++)t.datepickerReadyListeners[e](this)},i.prototype.fixPosition=function(){if(!this.isContainerExternal&&this.options.isPositionFixingEnabled()){for(var t=window.pageYOffset||this.document.documentElement.scrollTop,e=t+(window.innerHeight||Math.max(this.document.documentElement.clientHeight,this.document.body.clientHeight)),n=0,i=this.input;null!==i&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)n+=i.offsetTop-i.scrollTop,i=i.offsetParent;var o=n+this.input.offsetHeight,r=this.container.offsetHeight,s="",l=r<n-t&&e-o<r;l&&(s=" "+this.options.getClassesPrefix()+"container--over"),this.container.className=this.options.getClassesPrefix()+"container"+s;var a=this.container.childNodes;if(0<a.length){var h=a[0];if(l){var u=this.input.offsetHeight+this.container.offsetHeight;h.style.position="relative",h.style.top="-"+u.toString()+"px"}else h.style.position="",h.style.top=""}}},i.activateViewModel=function(t,e){var n=null!==e?e.viewModel:null;return!(i.activeViewModel!==n&&(null!==i.activeViewModel&&!i.activeViewModel.setActive(t,!1)||(null===n?i.activeViewModel=null:!n.setActive(t,!0)||(e.fixPosition(),i.activeViewModel=n,0))))},i.areGlobalListenersInitialized=!1,i.activeViewModel=null,i.hasClickedViewModel=!1,i);function i(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),this.initializationPhase=r.Untouched,this.inputListenerRemover=null,this.listenerRemovers=[],(this.deselectElement=null)!==t&&!o.Helper.isElement(t))throw new Error("Input was expected to be null or an HTMLElement.");if(null!==e&&!o.Helper.isElement(e))throw new Error("Container was expected to be null or an HTMLElement.");if(null===t&&null===e)throw new Error("At least one of input or container is mandatory.");if(null!==n&&!(n instanceof o.Options))throw new Error("Options was expected to be an instance of Options");this.document=document,this.options=null!==n?n.clone():new o.Options;var i="There is already a datepicker present on ";if(this.isContainerExternal=null!==e,null===e)e=this.createContainer(),null!==t&&t.parentNode.insertBefore(e,t.nextSibling);else if(void 0!==e.datepicker)throw new Error(i+"container.");if(null!==t){if(void 0!==t.datepicker)throw new Error(i+"input.");t.datepicker=this,t.autocomplete="off"}(e.datepicker=this).input=t,this.container=e,this.dateConverter=new o.DateConverter(this.options.translator),this.viewModel=new o.ViewModel(this.options,this),this.triggerReady(t),this.triggerReady(e)}o.Datepicker=e}(TheDatepicker=TheDatepicker||{}),function(e){var t=(n.prototype.getDate=function(){return new Date(this.year,this.month-1,this.dayNumber,0,0,0,0)},n.prototype.isEqualToDate=function(t){return null!==t&&this.dayNumber===t.getDate()&&this.month===t.getMonth()+1&&this.year===t.getFullYear()},n.prototype.isEqualToDay=function(t){return null!==t&&this.dayNumber===t.dayNumber&&this.month===t.month&&this.year===t.year},n);function n(t){this.isToday=!1,this.isPast=!1,this.isAvailable=!0,this.isInValidity=!0,this.isInCurrentMonth=!0,this.isSelected=!1,this.isHighlighted=!1,this.isFocused=!1,this.dayNumber=t.getDate(),this.month=t.getMonth()+1,this.year=t.getFullYear(),this.dayOfWeek=t.getDay(),this.isWeekend=this.dayOfWeek===e.DayOfWeek.Saturday||this.dayOfWeek===e.DayOfWeek.Sunday}e.Day=t}(TheDatepicker=TheDatepicker||{}),function(t){var e,n,i,o;(e=t.DayOfWeek||(t.DayOfWeek={}))[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.Sunday=0]="Sunday",(n=t.Month||(t.Month={}))[n.January=0]="January",n[n.February=1]="February",n[n.March=2]="March",n[n.April=3]="April",n[n.May=4]="May",n[n.June=5]="June",n[n.July=6]="July",n[n.August=7]="August",n[n.September=8]="September",n[n.October=9]="October",n[n.November=10]="November",n[n.December=11]="December",(i=t.KeyCode||(t.KeyCode={}))[i.Enter=13]="Enter",i[i.Space=32]="Space",i[i.Left=37]="Left",i[i.Up=38]="Up",i[i.Right=39]="Right",i[i.Down=40]="Down",(o=t.ListenerType||(t.ListenerType={})).MouseDown="mousedown",o.Focus="focus",o.FocusIn="focusin",o.Blur="blur",o.KeyDown="keydown",o.KeyUp="keyup";var r=(l.resetTime=function(t){if(null!==t)return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},l.normalizeDate=function(t,e){if(!e)return null;if("string"==typeof e){if("today"===e||"now"===e)return l.resetTime(new Date);if("tomorrow"===e){var n=l.resetTime(new Date);return n.setDate(n.getDate()+1),n}var i=e.match(/^\s*([+-]?)\s*([0-9]+)\s*(day|month|year)s?\s*$/i);if(null!==i){var o=l.resetTime(new Date),r=parseInt(i[2],10)*("-"===i[1]?-1:1);switch(i[3].toLowerCase()){case"day":case"days":o.setDate(o.getDate()+r);break;case"month":case"months":o.setMonth(o.getMonth()+r);break;case"year":case"years":o.setFullYear(o.getFullYear()+r)}return o}var s=new Date(e);if(!isNaN(s.getTime()))return l.resetTime(s)}else if(l.isValidDate(e))return l.resetTime(new Date(e.getTime()));throw new Error(t+"was expected to be a valid Date string or valid Date or null.")},l.normalizeMonth=function(t){if(null===t)return null;var e=new Date(t.getTime());return e.setDate(1),e},l.isElement=function(t){return"object"==typeof t&&1===t.nodeType&&"object"==typeof t.style&&"object"==typeof t.ownerDocument},l.isValidDate=function(t){return"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},l.inArray=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},l.addEventListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n),function(){e.removeEventListener(t,n)};var i="on"+t,o=e[i]||null;return e[i]=function(t){t=t||window.event,null!==o&&o.call(e,t),n(t)},function(){e[i]=o}},l.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},l.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},l.checkString=function(t,e,n){if(void 0===n&&(n=!1),!n&&!e)return"";if("string"!=typeof e||n&&""===e)throw new Error(t+" was expected to be a"+(n?" non empty":"")+" string.");return e},l.checkNumber=function(t,e,n,i){if(void 0===n&&(n=null),void 0===i&&(i=null),"number"!=typeof(e="string"==typeof e?parseInt(e):e)||isNaN(e)||null!==n&&e<n||null!==i&&i<e)throw new Error(t+" was expected to be a valid number"+(null!==n?" from "+n:"")+(null!==i?" to "+i:"")+".");return e},l.checkFunction=function(t,e,n){if(void 0===n&&(n=!0),n&&!e)return null;if("function"!=typeof e)throw new Error(t+" was expected to be a function"+(n?" or null":"")+".");return e},l);function l(){}t.Helper=r}(TheDatepicker=TheDatepicker||{}),function(o){var t=(e.prototype.createDiv=function(t){var e=this.document.createElement("div");return this.addClass(e,t),e},e.prototype.createAnchor=function(e){var t=this.document.createElement("a");return this.addClass(t,"button"),t.href="#",t.onclick=function(t){t=t||window.event,o.Helper.preventDefault(t),e(t)},t.onkeydown=function(t){t=t||window.event,o.Helper.inArray([o.KeyCode.Enter,o.KeyCode.Space],t.keyCode)&&(o.Helper.preventDefault(t),e(t))},t},e.prototype.createSpan=function(){return this.document.createElement("span")},e.prototype.createTable=function(t,e,n){var i=this.document.createElement("table");return this.addClass(i,t),i.appendChild(e),i.appendChild(n),i},e.prototype.createTableHeader=function(t,e){var n=this.document.createElement("thead");this.addClass(n,t);for(var i=this.document.createElement("tr"),o=0;o<e.length;o++)i.appendChild(e[o]);return n.appendChild(i),n},e.prototype.createTableHeaderCell=function(t){var e=this.document.createElement("th");return e.scope="col",this.addClass(e,t),e},e.prototype.createTableBody=function(t,e){var n=this.document.createElement("tbody");this.addClass(n,t);for(var i=0;i<e.length;i++)n.appendChild(e[i]);return n},e.prototype.createTableRow=function(t,e){for(var n=this.document.createElement("tr"),i=0;i<e.length;i++)n.appendChild(e[i]);return n},e.prototype.createTableCell=function(){return this.document.createElement("td")},e.prototype.createSelectInput=function(t,e){var n=this.document.createElement("select");this.addClass(n,"select");for(var i=0;i<t.length;i++)n.appendChild(this.createSelectOption(t[i].value,t[i].label));return n.onchange=function(t){e(t||window.event,parseInt(n.value,10))},n.onkeydown=function(t){t=t||window.event,o.Helper.stopPropagation(t)},n},e.prototype.createSelectOption=function(t,e){var n=this.document.createElement("option");return n.value=t.toString(),n.innerText=e,n},e.prototype.addClass=function(t,e){e=this.options.getClassesPrefix()+e,""!==t.className&&(e=" "+e),t.className+=e},e);function e(t){this.options=t,this.document=document}o.HtmlHelper=t}(TheDatepicker=TheDatepicker||{}),function(o){var e,t;(t=e=o.EventType||(o.EventType={})).BeforeSelect="beforeSelect",t.Select="select",t.BeforeSwitch="beforeSwitch",t.Switch="switch",t.MonthChange="monthChange",t.BeforeMonthChange="beforeMonthChange";var n=(i.prototype.clone=function(){var t=new i(this.translator);return t.hideOnBlur=this.hideOnBlur,t.hideOnSelect=this.hideOnSelect,t.minDate=this.minDate,t.maxDate=this.maxDate,t.minMonth=this.minMonth,t.maxMonth=this.maxMonth,t.initialDate=this.initialDate,t.initialMonth=this.initialMonth,t.firstDayOfWeek=this.firstDayOfWeek,t.dateAvailabilityResolver=this.dateAvailabilityResolver,t.cellContentResolver=this.cellContentResolver,t.cellClassesResolver=this.cellClassesResolver,t.inputFormat=this.inputFormat,t.daysOutOfMonthVisible=this.daysOutOfMonthVisible,t.fixedRowsCount=this.fixedRowsCount,t.toggleSelection=this.toggleSelection,t.allowEmpty=this.allowEmpty,t.showDeselectButton=this.showDeselectButton,t.showResetButton=this.showResetButton,t.monthAsDropdown=this.monthAsDropdown,t.yearAsDropdown=this.yearAsDropdown,t.classesPrefix=this.classesPrefix,t.showCloseButton=this.showCloseButton,t.title=this.title,t.yearDropdownItemsLimit=this.yearDropdownItemsLimit,t.goBackHtml=this.goBackHtml,t.goForwardHtml=this.goForwardHtml,t.closeHtml=this.closeHtml,t.resetHtml=this.resetHtml,t.deselectHtml=this.deselectHtml,t.positionFixing=this.positionFixing,t.listeners.beforeSelect=this.listeners.beforeSelect.slice(0),t.listeners.select=this.listeners.select.slice(0),t.listeners.beforeSwitch=this.listeners.beforeSwitch.slice(0),t.listeners.switch=this.listeners.switch.slice(0),t.listeners.monthChange=this.listeners.monthChange.slice(0),t.listeners.beforeMonthChange=this.listeners.beforeMonthChange.slice(0),t},i.prototype.setHideOnBlur=function(t){this.hideOnBlur=!!t},i.prototype.setHideOnSelect=function(t){this.hideOnSelect=!!t},i.prototype.setMinDate=function(t){var e=o.Helper.normalizeDate("Min date",t);this.checkConstraints(e,this.maxDate),this.minDate=e,this.minMonth=o.Helper.normalizeMonth(e)},i.prototype.setMaxDate=function(t){var e=o.Helper.normalizeDate("Max date",t);this.checkConstraints(this.minDate,e),this.maxDate=e,this.maxMonth=o.Helper.normalizeMonth(e)},i.prototype.setInitialMonth=function(t){this.initialMonth=o.Helper.normalizeDate("Initial month",t)},i.prototype.setInitialDate=function(t){this.initialDate=o.Helper.normalizeDate("Initial date",t)},i.prototype.setFirstDayOfWeek=function(t){this.firstDayOfWeek=o.Helper.checkNumber("First day of week",t,0,6)},i.prototype.setDateAvailabilityResolver=function(t){this.dateAvailabilityResolver=o.Helper.checkFunction("Resolver",t)},i.prototype.setCellContentResolver=function(t){this.cellContentResolver=o.Helper.checkFunction("Resolver",t)},i.prototype.setCellClassesResolver=function(t){this.cellClassesResolver=o.Helper.checkFunction("Resolver",t)},i.prototype.setInputFormat=function(t){this.inputFormat=o.Helper.checkString("Input format",t,!0)},i.prototype.setDaysOutOfMonthVisible=function(t){this.daysOutOfMonthVisible=!!t},i.prototype.setFixedRowsCount=function(t){this.fixedRowsCount=!!t},i.prototype.setToggleSelection=function(t){this.toggleSelection=!!t},i.prototype.setShowDeselectButton=function(t){this.showDeselectButton=!!t},i.prototype.setAllowEmpty=function(t){this.allowEmpty=!!t},i.prototype.setShowResetButton=function(t){this.showResetButton=!!t},i.prototype.setMonthAsDropdown=function(t){this.monthAsDropdown=!!t},i.prototype.setYearAsDropdown=function(t){this.yearAsDropdown=!!t},i.prototype.setClassesPrefix=function(t){this.classesPrefix=o.Helper.checkString("Prefix",t)},i.prototype.setShowCloseButton=function(t){this.showCloseButton=!!t},i.prototype.setTitle=function(t){this.title=o.Helper.checkString("Title",t)},i.prototype.setYearDropdownItemsLimit=function(t){this.yearDropdownItemsLimit=o.Helper.checkNumber("Items limit",t,1)},i.prototype.setGoBackHtml=function(t){this.goBackHtml=o.Helper.checkString("Html",t)},i.prototype.setGoForwardHtml=function(t){this.goForwardHtml=o.Helper.checkString("Html",t)},i.prototype.setCloseHtml=function(t){this.closeHtml=o.Helper.checkString("Html",t)},i.prototype.setResetHtml=function(t){this.resetHtml=o.Helper.checkString("Html",t)},i.prototype.setDeselectHtml=function(t){this.deselectHtml=o.Helper.checkString("Html",t)},i.prototype.setPositionFixing=function(t){this.positionFixing=!!t},i.prototype.onBeforeSelect=function(t){this.onEventListener(e.BeforeSelect,t)},i.prototype.offBeforeSelect=function(t){void 0===t&&(t=null),this.offEventListener(e.BeforeSelect,t)},i.prototype.onSelect=function(t){this.onEventListener(e.Select,t)},i.prototype.offSelect=function(t){void 0===t&&(t=null),this.offEventListener(e.Select,t)},i.prototype.onBeforeSwitch=function(t){this.onEventListener(e.BeforeSwitch,t)},i.prototype.offBeforeSwitch=function(t){void 0===t&&(t=null),this.offEventListener(e.BeforeSwitch,t)},i.prototype.onSwitch=function(t){this.onEventListener(e.Switch,t)},i.prototype.offSwitch=function(t){void 0===t&&(t=null),this.offEventListener(e.Switch,t)},i.prototype.onBeforeMonthChange=function(t){this.onEventListener(e.BeforeMonthChange,t)},i.prototype.offBeforeMonthChange=function(t){void 0===t&&(t=null),this.offEventListener(e.BeforeMonthChange,t)},i.prototype.onMonthChange=function(t){this.onEventListener(e.MonthChange,t)},i.prototype.offMonthChange=function(t){void 0===t&&(t=null),this.offEventListener(e.MonthChange,t)},i.prototype.getInitialMonth=function(){var t=null!==this.initialDate?new Date(this.initialDate.getTime()):null!==this.initialMonth?new Date(this.initialMonth.getTime()):o.Helper.resetTime(new Date);return t.setDate(1),this.correctMonth(t)},i.prototype.isMonthInValidity=function(t){return null===this.calculateMonthCorrection(t)},i.prototype.correctMonth=function(t){var e=this.calculateMonthCorrection(t);return null!==e?e:t},i.prototype.getInitialDate=function(){if(this.isAllowedEmpty())return null!==this.initialDate&&this.isDateInValidity(this.initialDate)&&this.isDateAvailable(this.initialDate)?new Date(this.initialDate.getTime()):null;var t=null!==this.initialDate?new Date(this.initialDate.getTime()):o.Helper.resetTime(new Date);if(t=this.correctDate(t),this.isDateAvailable(t))return t;var e=150,n=t,i=new Date(t.getTime());do{if(null!==n)if(n.setDate(n.getDate()+1),null!==this.maxDate&&n.getTime()>this.maxDate.getTime())n=null;else if(this.isDateAvailable(n))return n;if(null!==i)if(i.setDate(i.getDate()-1),null!==this.minDate&&i.getTime()<this.minDate.getTime())i=null;else if(this.isDateAvailable(i))return i;e--}while((null!==n||null!==i)&&0<e);return null},i.prototype.isDateInValidity=function(t){return null===this.calculateDateCorrection(t)},i.prototype.correctDate=function(t){var e=this.calculateDateCorrection(t);return null!==e?e:t},i.prototype.getFirstDayOfWeek=function(){return this.firstDayOfWeek},i.prototype.areDaysOutOfMonthVisible=function(){return this.daysOutOfMonthVisible},i.prototype.hasFixedRowsCount=function(){return this.fixedRowsCount},i.prototype.hasToggleSelection=function(){return this.allowEmpty&&this.toggleSelection},i.prototype.isAllowedEmpty=function(){return this.allowEmpty},i.prototype.isDeselectButtonShown=function(){return this.allowEmpty&&this.showDeselectButton},i.prototype.isResetButtonShown=function(){return this.showResetButton},i.prototype.isMonthAsDropdown=function(){return this.monthAsDropdown},i.prototype.isYearAsDropdown=function(){return this.yearAsDropdown},i.prototype.getClassesPrefix=function(){return this.classesPrefix},i.prototype.isCloseButtonShown=function(){return this.hideOnBlur&&this.showCloseButton},i.prototype.getTitle=function(){return this.title},i.prototype.getMinDate=function(){return this.minDate},i.prototype.getMaxDate=function(){return this.maxDate},i.prototype.getMinMonth=function(){return this.minMonth},i.prototype.getMaxMonth=function(){return this.maxMonth},i.prototype.getYearDropdownItemsLimit=function(){return this.yearDropdownItemsLimit},i.prototype.isDateAvailable=function(t){return null===this.dateAvailabilityResolver||!!this.dateAvailabilityResolver(new Date(t.getTime()))},i.prototype.getCellContent=function(t){return null!==this.cellContentResolver?this.cellContentResolver(t):t.dayNumber.toString()},i.prototype.getCellClasses=function(t){if(null!==this.cellClassesResolver){var e=this.cellClassesResolver(t);if("object"==typeof e&&e.constructor===Array)return e}return[]},i.prototype.getGoBackHtml=function(){return this.goBackHtml},i.prototype.getGoForwardHtml=function(){return this.goForwardHtml},i.prototype.getCloseHtml=function(){return this.closeHtml},i.prototype.getResetHtml=function(){return this.resetHtml},i.prototype.getDeselectHtml=function(){return this.deselectHtml},i.prototype.isHiddenOnBlur=function(){return this.hideOnBlur},i.prototype.isHiddenOnSelect=function(){return this.hideOnBlur&&this.hideOnSelect},i.prototype.getInputFormat=function(){return this.inputFormat},i.prototype.isPositionFixingEnabled=function(){return this.hideOnBlur&&this.positionFixing},i.prototype.checkConstraints=function(t,e){if(null!==t&&null!==e&&t.getTime()>e.getTime())throw new Error("Min date cannot be higher then max date.")},i.prototype.calculateMonthCorrection=function(t){var e=this.getMinMonth();if(null!==e&&t.getTime()<e.getTime())return e;var n=this.getMaxMonth();return null!==n&&t.getTime()>n.getTime()?n:null},i.prototype.calculateDateCorrection=function(t){return null!==this.minDate&&t.getTime()<this.minDate.getTime()?new Date(this.minDate.getTime()):null!==this.maxDate&&t.getTime()>this.maxDate.getTime()?new Date(this.maxDate.getTime()):null},i.prototype.onEventListener=function(t,e){this.listeners[t].push(o.Helper.checkFunction("Event listener",e,!1))},i.prototype.offEventListener=function(t,e){if(null===(e=o.Helper.checkFunction("Event listener",e)))this.listeners[t]=[];else{for(var n=[],i=0;i<this.listeners[t].length;i++)this.listeners[t][i]!==e&&n.push(this.listeners[t][i]);this.listeners[t]=n}},i.prototype.triggerEvent=function(t,e){for(var n=0;n<this.listeners[t].length;n++)if(!1===e(this.listeners[t][n]))return!1;return!0},i);function i(t){void 0===t&&(t=null),this.hideOnBlur=!0,this.hideOnSelect=!0,this.minDate=null,this.maxDate=null,this.minMonth=null,this.maxMonth=null,this.initialDate=null,this.initialMonth=null,this.firstDayOfWeek=o.DayOfWeek.Monday,this.dateAvailabilityResolver=null,this.cellContentResolver=null,this.cellClassesResolver=null,this.inputFormat="j. n. Y",this.daysOutOfMonthVisible=!1,this.fixedRowsCount=!1,this.toggleSelection=!1,this.allowEmpty=!0,this.showDeselectButton=!0,this.showResetButton=!1,this.monthAsDropdown=!0,this.yearAsDropdown=!0,this.classesPrefix="the-datepicker__",this.showCloseButton=!0,this.title="",this.yearDropdownItemsLimit=200,this.goBackHtml="&lt;",this.goForwardHtml="&gt;",this.closeHtml="&times;",this.resetHtml="&olarr;",this.deselectHtml="&times;",this.positionFixing=!0,this.listeners={beforeSelect:[],select:[],beforeSwitch:[],switch:[],monthChange:[],beforeMonthChange:[]},this.translator=null!==t?t:new o.Translator}o.Options=n}(TheDatepicker=TheDatepicker||{}),function(l){var e,t;(t=e=l.MoveDirection||(l.MoveDirection={}))[t.Left=-1]="Left",t[t.Up=-7]="Up",t[t.Right=1]="Right",t[t.Down=7]="Down";var n=(i.prototype.render=function(){if(null!==this.selectedDate){if((!this.options.isDateInValidity(this.selectedDate)||!this.options.isDateAvailable(this.selectedDate))&&this.cancelSelection(null))return}else if(!this.options.isAllowedEmpty()&&this.selectDay(null,this.options.getInitialDate(),!1))return;var t=this.options.correctMonth(this.getCurrentMonth());this.goToMonth(null,t)||(this.template.render(this),this.datepicker.updateInput())},i.prototype.setActive=function(t,e){return this.active===e||!!this.triggerOnBeforeSwitch(t,e)&&(this.active=e,this.options.isHiddenOnBlur()&&this.render(),this.triggerOnSwitch(t,e),!0)},i.prototype.isActive=function(){return this.active},i.prototype.close=function(t){return this.datepicker.close(t)},i.prototype.getCurrentMonth=function(){return null===this.currentMonth&&(this.currentMonth=this.options.getInitialMonth()),this.currentMonth},i.prototype.canGoBack=function(){var t=new Date(this.getCurrentMonth().getTime());return t.setMonth(t.getMonth()-1),this.canGoToMonth(t)},i.prototype.canGoForward=function(){var t=new Date(this.getCurrentMonth().getTime());return t.setMonth(t.getMonth()+1),this.canGoToMonth(t)},i.prototype.canGoToMonth=function(t){return this.options.isMonthInValidity(t)},i.prototype.goBack=function(t){var e=new Date(this.getCurrentMonth().getTime());return e.setMonth(e.getMonth()-1),this.goToMonth(t,e)},i.prototype.goForward=function(t){var e=new Date(this.getCurrentMonth().getTime());return e.setMonth(e.getMonth()+1),this.goToMonth(t,e)},i.prototype.goToMonth=function(t,e,n){return void 0===n&&(n=!0),(e=l.Helper.resetTime(new Date(e.getTime()))).setDate(1),!(e.getTime()===this.getCurrentMonth().getTime()||!this.canGoToMonth(e)||!this.triggerOnBeforeMonthChange(t,e,this.currentMonth)||(this.currentMonth=e,n&&this.cancelHighlight()||this.render(),this.triggerOnMonthChange(t,e,this.currentMonth),0))},i.prototype.reset=function(t){var e=this.goToMonth(t,this.options.getInitialMonth()),n=this.selectDay(t,this.options.getInitialDate(),!1);return e||n},i.prototype.selectDay=function(t,e,n,i,o){if(void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o=!1),null===e)return this.cancelSelection(t);var r;if(e instanceof l.Day?e=(r=e).getDate():r=this.createDay(e),!r.isAvailable)return!1;if(r.isEqualToDate(this.selectedDate))return!(!o||!this.options.hasToggleSelection())&&this.cancelSelection(t);var s=null!==this.selectedDate?this.createDay(this.selectedDate):null;return!!this.triggerOnBeforeSelect(t,r,s)&&(this.selectedDate=r.getDate(),i&&(this.highlightedDay=r,this.isHighlightedDayFocused=!0),n&&this.goToMonth(t,e)||this.render(),this.triggerOnSelect(t,r,s),!0)},i.prototype.selectDateSince=function(t,e){var n=this.options.getMaxDate(),i=100,o=this.createDay(e);for(e=o.getDate();!o.isAvailable&&0<i&&(e.setDate(o.dayNumber+1),!(null!==n&&e.getTime()>n.getTime()));)o=this.createDay(e),i--;return this.selectDay(t,e)},i.prototype.highlightDay=function(t,e,n){if(void 0===n&&(n=!1),!e.isAvailable)return!1;if(e.isEqualToDay(this.highlightedDay))return!1;this.highlightedDay=e,this.isHighlightedDayFocused=!0;var i=e.getDate();return n&&this.goToMonth(t,i,!1)||this.render(),!0},i.prototype.highlightFirstAvailableDay=function(t){for(var e=new Date(this.getCurrentMonth().getTime()),n=this.options.getMaxDate(),i=this.createDay(e);!(i.isAvailable||(e.setDate(i.dayNumber+1),1===e.getDate())||null!==n&&e.getTime()>n.getTime());)i=this.createDay(e);return this.highlightDay(t,i)},i.prototype.highlightSiblingDay=function(t,e,n){var i=e,o=i.getDate(),r=100;do{if(o.setDate(i.dayNumber+n),!(i=this.createDay(o)).isInValidity)break;r--}while(!i.isAvailable&&0<r);return this.highlightDay(t,i,!0)},i.prototype.cancelSelection=function(t){if(!this.options.isAllowedEmpty())return!1;if(null===this.selectedDate)return!1;var e=this.createDay(this.selectedDate);return!!this.triggerOnBeforeSelect(t,null,e)&&(this.selectedDate=null,this.render(),this.triggerOnSelect(t,null,e),!0)},i.prototype.cancelHighlight=function(){return null!==this.highlightedDay&&(this.highlightedDay=null,this.render(),!0)},i.prototype.getWeekDays=function(){for(var t=[],e=0;e<7;e++)t.push((this.options.getFirstDayOfWeek()+e)%7);return t},i.prototype.getWeeks=function(){var t,e=[],n=this.getCurrentMonth(),i=new Date(n.getFullYear(),n.getMonth(),1),o=new Date(n.getFullYear(),n.getMonth(),0).getDate();for(t=o-(i.getDay()-this.options.getFirstDayOfWeek()+7)%7+1;t<=o;t++)(h=this.createDay(new Date(n.getFullYear(),n.getMonth()-1,t))).isInCurrentMonth=!1,e.push(h);var r=new Date(n.getFullYear(),n.getMonth()+1,0),s=r.getDate();for(t=1;t<=s;t++)e.push(this.createDay(new Date(n.getFullYear(),n.getMonth(),t)));var l=6-(r.getDay()-this.options.getFirstDayOfWeek()+7)%7;for(t=1;t<=l;t++)(h=this.createDay(new Date(n.getFullYear(),n.getMonth()+1,t))).isInCurrentMonth=!1,e.push(h);if(this.options.hasFixedRowsCount())for(var a=1+l;e.length<42;a++){var h;(h=this.createDay(new Date(n.getFullYear(),n.getMonth()+1,a))).isInCurrentMonth=!1,e.push(h)}for(var u=[],p=0;p<e.length;p+=7)u.push(e.slice(p,p+7));return u},i.prototype.triggerKeyPress=function(t){l.Helper.inArray([l.KeyCode.Left,l.KeyCode.Up,l.KeyCode.Right,l.KeyCode.Down],t.keyCode)&&(l.Helper.preventDefault(t),null!==this.highlightedDay?this.highlightSiblingDay(t,this.highlightedDay,this.translateKeyCodeToMoveDirection(t.keyCode)):null!==this.selectedDate&&this.selectedDate.getFullYear()===this.getCurrentMonth().getFullYear()&&this.selectedDate.getMonth()===this.getCurrentMonth().getMonth()?this.highlightSiblingDay(t,this.createDay(this.selectedDate),this.translateKeyCodeToMoveDirection(t.keyCode)):this.highlightFirstAvailableDay(t))},i.prototype.triggerOnBeforeSelect=function(e,n,i){return this.options.triggerEvent(l.EventType.BeforeSelect,function(t){return t.call(n,e,n,i)})},i.prototype.triggerOnSelect=function(e,n,i){this.options.triggerEvent(l.EventType.Select,function(t){return t.call(n,e,n,i)})},i.prototype.triggerOnBeforeSwitch=function(e,n){var i=this;return this.options.triggerEvent(l.EventType.BeforeSwitch,function(t){return t.call(i.datepicker,e,n)})},i.prototype.triggerOnSwitch=function(e,n){var i=this;this.options.triggerEvent(l.EventType.Switch,function(t){return t.call(i.datepicker,e,n)})},i.prototype.triggerOnBeforeMonthChange=function(e,n,i){return this.options.triggerEvent(l.EventType.BeforeMonthChange,function(t){return t.call(n,e,n,i)})},i.prototype.triggerOnMonthChange=function(e,n,i){this.options.triggerEvent(l.EventType.MonthChange,function(t){return t.call(n,e,n,i)})},i.prototype.createDay=function(t){t=l.Helper.resetTime(new Date(t.getTime()));var e=new l.Day(t);return e.isToday=t.getTime()===this.today.getTime(),e.isPast=t.getTime()<this.today.getTime(),e.isInValidity=this.options.isDateInValidity(t),e.isAvailable=e.isInValidity&&this.options.isDateAvailable(t),e.isAvailable&&(e.isEqualToDate(this.selectedDate)&&(e.isSelected=!0),e.isEqualToDay(this.highlightedDay)&&(e.isHighlighted=!0,this.isHighlightedDayFocused&&(e.isFocused=!0))),e},i.prototype.translateKeyCodeToMoveDirection=function(t){switch(t){case l.KeyCode.Left:return e.Left;case l.KeyCode.Up:return e.Up;case l.KeyCode.Right:return e.Right;case l.KeyCode.Down:return e.Down;default:throw new Error("Invalid key code: "+t)}},i);function i(t,e){this.options=t,this.datepicker=e,this.selectedDate=null,this.currentMonth=null,this.highlightedDay=null,this.isHighlightedDayFocused=!1,this.active=!1,this.today=l.Helper.resetTime(new Date),this.template=new l.Template(this.options,new l.HtmlHelper(this.options),e.container,null!==e.input)}l.ViewModel=n}(TheDatepicker=TheDatepicker||{}),function(i){var t=(e.prototype.render=function(t){if(null===this.mainElement){if(this.hasInput&&this.options.isHiddenOnBlur()&&!t.isActive())return;this.container.innerHTML="",this.container.appendChild(this.createSkeleton(t))}this.updateMainElement(t),this.updateTopElement(t),this.updateTitleElement(t),this.updateCloseElement(t),this.updateResetElement(t),this.updateGoBackElement(t),this.updateGoForwardElement(t),this.updateMonthElement(t),this.updateYearElement(t),this.updateWeeksElements(t)},e.prototype.createSkeleton=function(t){var e=this.htmlHelper.createDiv("main");return e.appendChild(this.createHeaderElement(t)),e.appendChild(this.createBodyElement(t)),this.mainElement=e},e.prototype.updateMainElement=function(t){this.mainElement.style.display=this.hasInput&&!t.isActive()&&this.options.isHiddenOnBlur()?"none":""},e.prototype.createBodyElement=function(t){var e=this.htmlHelper.createDiv("body");return e.appendChild(this.createTableElement(t)),e},e.prototype.createHeaderElement=function(t){var e=this.htmlHelper.createDiv("header"),n=this.htmlHelper.createDiv("top");e.appendChild(n),n.appendChild(this.createTitleElement(t));var i=this.htmlHelper.createDiv("control");n.appendChild(i),i.appendChild(this.createResetElement(t)),i.appendChild(this.createCloseElement(t));var o=this.htmlHelper.createDiv("navigation");e.appendChild(o),o.appendChild(this.createGoBackElement(t));var r=this.htmlHelper.createDiv("state");return o.appendChild(r),r.appendChild(this.createMonthElement(t)),r.appendChild(this.createYearElement(t)),o.appendChild(this.createGoForwardElement(t)),this.controlElement=i,e},e.prototype.updateTopElement=function(t){var e=""!==this.options.getTitle()||this.options.isResetButtonShown()||this.hasInput&&this.options.isCloseButtonShown();this.controlElement.style.display=e?"":"none",this.titleElement.style.display=e?"":"none"},e.prototype.createTitleElement=function(t){var e=this.htmlHelper.createDiv("title"),n=this.htmlHelper.createSpan();return e.appendChild(n),this.htmlHelper.addClass(n,"title-content"),this.titleElement=e,this.titleContentElement=n,e},e.prototype.updateTitleElement=function(t){var e=this.options.getTitle();this.titleContentElement.style.display=""!==e?"":"none",this.titleContentElement.innerText=e},e.prototype.createResetElement=function(e){var t=this.htmlHelper.createDiv("reset"),n=this.htmlHelper.createAnchor(function(t){e.reset(t)});return n.innerHTML=this.options.getResetHtml(),t.appendChild(n),this.resetElement=t},e.prototype.updateResetElement=function(t){this.resetElement.style.display=this.options.isResetButtonShown()?"":"none"},e.prototype.createCloseElement=function(e){var t=this.htmlHelper.createDiv("close"),n=this.htmlHelper.createAnchor(function(t){e.close(t)});return n.innerHTML=this.options.getCloseHtml(),t.appendChild(n),this.closeElement=t},e.prototype.updateCloseElement=function(t){this.closeElement.style.display=this.hasInput&&this.options.isCloseButtonShown()?"":"none"},e.prototype.createGoBackElement=function(t){return this.createGoElement(t,!1)},e.prototype.createGoForwardElement=function(t){return this.createGoElement(t,!0)},e.prototype.createGoElement=function(e,n){var t=this.htmlHelper.createDiv("go");this.htmlHelper.addClass(t,n?"go-next":"go-previous");var i=this.htmlHelper.createAnchor(function(t){n?e.goForward(t):e.goBack(t)});return i.innerHTML=n?this.options.getGoForwardHtml():this.options.getGoBackHtml(),t.appendChild(i),n?this.goForwardElement=i:this.goBackElement=i,t},e.prototype.updateGoBackElement=function(t){this.goBackElement.style.visibility=t.canGoBack()?"visible":"hidden"},e.prototype.updateGoForwardElement=function(t){this.goForwardElement.style.visibility=t.canGoForward()?"visible":"hidden"},e.prototype.createMonthElement=function(o){for(var r=this,t=[],e=0;e<12;e++)t.push({value:e,label:this.options.translator.translateMonth(e)});var n=this.htmlHelper.createSelectInput(t,function(t,e){var n=o.getCurrentMonth(),i=new Date(n.getTime());i.setMonth(e),o.goToMonth(t,i)||(r.monthSelect.value=n.getMonth().toString())}),i=this.htmlHelper.createDiv("month"),s=this.htmlHelper.createSpan();return i.appendChild(n),i.appendChild(s),this.monthElement=s,this.monthSelect=n,i},e.prototype.updateMonthElement=function(t){var e=t.getCurrentMonth().getMonth();if(this.monthElement.innerText=this.options.translator.translateMonth(e),!this.options.isMonthAsDropdown())return this.monthSelect.style.display="none",void(this.monthElement.style.display="");for(var n=0,i=0;i<12;i++){var o=new Date(t.getCurrentMonth().getTime());o.setMonth(i);var r=this.monthSelect.getElementsByTagName("option")[i],s=t.canGoToMonth(o);r.disabled=!s,r.style.display=s?"":"none",n+=s?1:0}this.monthSelect.value=e.toString(),this.monthSelect.style.display=1<n?"":"none",this.monthElement.style.display=1<n?"none":""},e.prototype.createYearElement=function(s){var l=this,t=this.htmlHelper.createSelectInput([],function(t,e){var n=s.getCurrentMonth(),i=new Date(n.getTime());i.setFullYear(e);var o=l.options.getMinMonth(),r=l.options.getMaxMonth();null!==o&&i.getTime()<o.getTime()&&(i=o),null!==r&&i.getTime()>r.getTime()&&(i=r),s.goToMonth(t,i)||(l.yearSelect.value=n.getFullYear().toString())}),e=this.htmlHelper.createDiv("year"),n=this.htmlHelper.createSpan();return e.appendChild(t),e.appendChild(n),this.yearElement=n,this.yearSelect=t,e},e.prototype.updateYearElement=function(t){var e=t.getCurrentMonth().getFullYear();if(this.yearElement.innerText=e.toString(),!this.options.isYearAsDropdown())return this.yearSelect.style.display="none",void(this.yearElement.style.display="");var n=this.options.getMinDate(),i=this.options.getMaxDate(),o=null!==n?n.getFullYear():null,r=null!==i?i.getFullYear():null,s=this.options.getYearDropdownItemsLimit()-1,l=Math.ceil(s/2),a=e-(s-l),h=e+l;null!==o&&a<o?(h+=o-a,null!==r&&r<h&&(h=r),a=o):null!==r&&r<h&&(a-=h-r,null!==o&&a<o&&(a=o),h=r);for(var u=this.yearSelect.getElementsByTagName("option"),p=0<u.length?parseInt(u[0].value,10):null,c=0<u.length?parseInt(u[u.length-1].value,10):null,d=[],y=[],f=[],m=a;m<=h;m++)null===p||m<p?d.push(m):c<m&&y.push(m);for(var g=0;g<u.length;g++)((m=parseInt(u[g].value,10))<a||h<m)&&f.push(u[g]);for(g=0;g<f.length;g++)this.yearSelect.removeChild(f[g]);for(g=d.length-1;0<=g;g--)this.yearSelect.insertBefore(this.htmlHelper.createSelectOption(d[g],d[g].toString()),this.yearSelect.firstChild);for(g=0;g<y.length;g++)this.yearSelect.appendChild(this.htmlHelper.createSelectOption(y[g],y[g].toString()));this.yearSelect.value=e.toString(),this.yearSelect.style.display=a<h?"":"none",this.yearElement.style.display=a<h?"none":""},e.prototype.createTableElement=function(t){var e=this.createTableHeaderElement(t),n=this.createTableBodyElement(t);return this.htmlHelper.createTable("calendar",e,n)},e.prototype.createTableHeaderElement=function(t){for(var e=t.getWeekDays(),n=[],i=0;i<e.length;i++){var o=e[i];n.push(this.createTableHeaderCellElement(t,o))}return this.htmlHelper.createTableHeader("calendar-header",n)},e.prototype.createTableHeaderCellElement=function(t,e){var n=this.htmlHelper.createTableHeaderCell("week-day");return e!==i.DayOfWeek.Saturday&&e!==i.DayOfWeek.Sunday||this.htmlHelper.addClass(n,"week-day--weekend"),n.innerText=this.options.translator.translateDayOfWeek(e),n},e.prototype.createTableBodyElement=function(t){this.daysElements=[],this.daysButtonsElements=[],this.daysContentsElements=[];for(var e=[],n=0;n<6;n++)e.push(this.createTableRowElement(t));return this.weeksElements=e,this.htmlHelper.createTableBody("calendar-body",e)},e.prototype.updateWeeksElements=function(t){for(var e=t.getWeeks(),n=0;n<this.weeksElements.length;n++){var i=this.weeksElements[n],o=e.length>n?e[n]:null;if(i.style.display=null!==o?"":"none",null!==o)for(var r=0;r<this.daysElements[n].length;r++)this.updateDayElement(t,this.daysElements[n][r],this.daysButtonsElements[n][r],this.daysContentsElements[n][r],o[r])}},e.prototype.createTableRowElement=function(t){for(var e=[],n=[],i=[],o=0;o<7;o++){var r=this.htmlHelper.createTableCell(),s=this.createTableCellButtonElement(t),l=this.createTableCellContentElement(t);e.push(r),n.push(s),i.push(l),r.appendChild(s),s.appendChild(l)}return this.daysElements.push(e),this.daysButtonsElements.push(n),this.daysContentsElements.push(i),this.htmlHelper.createTableRow("week",e)},e.prototype.updateDayElement=function(t,e,n,i,o){if(n.day=o,e.className="",this.htmlHelper.addClass(e,"cell"),!o.isInCurrentMonth&&!this.options.areDaysOutOfMonthVisible())return i.innerHTML="&nbsp;",n.removeAttribute("href"),void(n.style.visibility="hidden");this.htmlHelper.addClass(e,"day"),o.isToday&&this.htmlHelper.addClass(e,"day--today"),o.isWeekend&&this.htmlHelper.addClass(e,"day--weekend"),o.isAvailable||this.htmlHelper.addClass(e,"day--unavailable"),o.isInCurrentMonth||this.htmlHelper.addClass(e,"day--outside"),o.isHighlighted&&this.htmlHelper.addClass(e,"day--highlighted"),o.isSelected&&this.htmlHelper.addClass(e,"day--selected");for(var r=this.options.getCellClasses(o),s=0;s<r.length;s++)e.className+=" "+r[s];n.style.visibility="visible",i.innerText=this.options.getCellContent(o),o.isAvailable?n.href="#":n.removeAttribute("href"),o.isFocused&&n.focus()},e.prototype.createTableCellButtonElement=function(e){var n=this,i=this.htmlHelper.createAnchor(function(t){e.selectDay(t,i.day,!1,!0,!0),n.options.isHiddenOnSelect()&&e.close(t)});return i.onfocus=function(t){e.highlightDay(t||window.event,i.day)},i.onmouseenter=function(){e.cancelHighlight()},i.onmouseleave=function(){e.cancelHighlight()},i},e.prototype.createTableCellContentElement=function(t){var e=this.htmlHelper.createSpan();return this.htmlHelper.addClass(e,"day-content"),e},e);function e(t,e,n,i){this.options=t,this.htmlHelper=e,this.container=n,this.hasInput=i,this.mainElement=null,this.controlElement=null,this.goBackElement=null,this.goForwardElement=null,this.titleElement=null,this.titleContentElement=null,this.resetElement=null,this.closeElement=null,this.monthSelect=null,this.monthElement=null,this.yearSelect=null,this.yearElement=null,this.weeksElements=[],this.daysElements=[],this.daysButtonsElements=[],this.daysContentsElements=[]}i.Template=t}(TheDatepicker=TheDatepicker||{}),HTMLElement.prototype.onDatepickerReady=function(t){void 0===this.datepicker?(void 0===this.datepickerReadyListeners&&(this.datepickerReadyListeners=[]),this.datepickerReadyListeners.push(t)):t(this.datepicker)};